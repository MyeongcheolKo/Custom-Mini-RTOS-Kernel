/*
 * SPI_driver.h
 *
 *  Created on: Dec 28, 2025
 *      Author: krisko
 */

#ifndef DRIVERS_SPI_DRIVER_H_
#define DRIVERS_SPI_DRIVER_H_

#include <stdint.h>
#include "STM32F446xx.h"

/*
 * SPI device configuration structure
 */
typedef struct{
	uint8_t SPI_mode;			//SPI mode
	uint8_t SPI_bus;			//
	uint8_t SPI_sclk_speed;		//serial clock speed
	uint8_t SPI_DFF;			//data frame format
	uint8_t SPI_CPOL;			//clock polarity
	uint8_t SPI_CPHA;			//clock phase
	uint8_t SPI_SSM;			//software slave management
}SPI_config_t;

/*
 * SPI device Handle structure
 */
typedef struct{
	SPI_reg_t 		*p_SPIx;
	SPI_config_t 	SPI_config;
}SPI_Handle_t;

/**************************API**************************/

//clock setup
void SPI_clock_control(SPI_reg_t *p_SPIx, uint8_t enable);


//initialize and diinitialize
void SPI_init(SPI_Handle_t *p_SPI_Handle);
void SPI_deinit(SPI_config_t *p_SPIx);


//send and recieve
void SPI_send(SPI_reg_t *p_SPIx, uint8_t *p_Tx_buffer, uint32_t len);
void SPI_recieve(SPI_reg_t *p_SPIx, uint8_t *p_Rx_buffer, uint32_t len);


//IQR configuration and handling
void SPI_IRQ_config(uint8_t IRQ_num, uint8_t enable);
void SPI_set_priority(uint8_t IRQ_num, uint8_t IRQ_priority);
void SPI_IRQ_handler(SPI_Handle_t *p_SPI_Handle);

#endif /* DRIVERS_SPI_DRIVER_H_ */
